import React, { useState } from 'react';\nimport { MediaItem } from '../types';\n\ninterface MediaViewerProps {\n  media: MediaItem;\n  onClose: () => void;\n  allMedia?: MediaItem[];\n}\n\nconst MediaViewer: React.FC<MediaViewerProps> = ({ media, onClose, allMedia = [] }) => {\n  const [currentIndex, setCurrentIndex] = useState(() => {\n    if (!allMedia || allMedia.length === 0) return 0;\n    return allMedia.findIndex(item => item.id === media.id);\n  });\n\n  const currentMedia = allMedia && allMedia.length > 0 \n    ? allMedia[currentIndex] \n    : media;\n\n  const handleNext = () => {\n    if (!allMedia || allMedia.length <= 1) return;\n    setCurrentIndex((currentIndex + 1) % allMedia.length);\n  };\n\n  const handlePrevious = () => {\n    if (!allMedia || allMedia.length <= 1) return;\n    setCurrentIndex((currentIndex - 1 + allMedia.length) % allMedia.length);\n  };\n\n  return (\n    <div className=\"fixed inset-0 z-50 bg-black bg-opacity-90 flex flex-col\">\n      <div className=\"flex justify-between items-center p-4\">\n        <div>\n          <h2 className=\"text-white text-lg font-medium\">\n            {currentMedia.type === 'image' ? 'Image' : 'Video'} {allMedia && allMedia.length > 0 ? `${currentIndex + 1}/${allMedia.length}` : ''}\n          </h2>\n        </div>\n        <button \n          onClick={onClose}\n          className=\"p-2 text-white hover:bg-[var(--color-hover)] rounded-md transition-colors\"\n        >\n          <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n          </svg>\n        </button>\n      </div>\n\n      <div className=\"flex-1 flex items-center justify-center relative\">\n        {allMedia && allMedia.length > 1 && (\n          <>\n            <button \n              onClick={handlePrevious}\n              className=\"absolute left-4 p-2 text-white bg-black bg-opacity-50 hover:bg-opacity-70 rounded-full transition-colors\"\n            >\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-8 w-8\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\n              </svg>\n            </button>\n            <button \n              onClick={handleNext}\n              className=\"absolute right-4 p-2 text-white bg-black bg-opacity-50 hover:bg-opacity-70 rounded-full transition-colors\"\n            >\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-8 w-8\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\n              </svg>\n            </button>\n          </>\n        )}\n        \n        {currentMedia.type === 'image' ? (\n          <img \n            src={currentMedia.url} \n            alt=\"Media\" \n            className=\"max-h-[80vh] max-w-[90vw] object-contain\" \n          />\n        ) : (\n          <video \n            src={currentMedia.url} \n            controls \n            className=\"max-h-[80vh] max-w-[90vw]\" \n            autoPlay \n          />\n        )}\n      </div>\n\n      <div className=\"p-4 bg-[var(--color-bg-secondary)]\">\n        <div className=\"flex justify-between items-center\">\n          <div className=\"text-[var(--color-text-primary)]\">\n            {new Date(currentMedia.timestamp).toLocaleString()}\n          </div>\n          <div className=\"flex gap-2\">\n            <button className=\"p-2 text-[var(--color-text-secondary)] hover:text-[var(--color-text-primary)] hover:bg-[var(--color-hover)] rounded-md transition-colors\">\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4\" />\n              </svg>\n            </button>\n            <button className=\"p-2 text-[var(--color-text-secondary)] hover:text-[var(--color-text-primary)] hover:bg-[var(--color-hover)] rounded-md transition-colors\">\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z\" />\n              </svg>\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default MediaViewer;