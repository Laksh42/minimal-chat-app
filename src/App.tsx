import React, { useState, useEffect } from 'react';\nimport { ChatProvider, useChat } from './context/ChatContext';\nimport Header from './components/Header';\nimport Sidebar from './components/Sidebar';\nimport ChatWindow from './components/ChatWindow';\nimport MediaViewer from './components/MediaViewer';\n\nfunction AppContent() {\n  const [isMobile, setIsMobile] = useState(window.innerWidth < 640);\n  const [sidebarOpen, setSidebarOpen] = useState(!isMobile);\n  const { selectedMedia, setSelectedMedia, media } = useChat();\n\n  // Handle window resize\n  useEffect(() => {\n    const handleResize = () => {\n      const mobile = window.innerWidth < 640;\n      setIsMobile(mobile);\n      if (!mobile && !sidebarOpen) {\n        setSidebarOpen(true);\n      }\n    };\n\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, [sidebarOpen]);\n\n  const toggleSidebar = () => {\n    setSidebarOpen(!sidebarOpen);\n  };\n\n  return (\n    <div className=\"flex flex-col h-screen bg-[var(--color-bg-primary)]\">\n      <Header onMenuToggle={toggleSidebar} isMobile={isMobile} />\n      \n      <div className=\"flex flex-1 overflow-hidden\">\n        <Sidebar \n          isOpen={sidebarOpen} \n          onClose={() => setSidebarOpen(false)} \n          isMobile={isMobile} \n        />\n        \n        <main className=\"flex-1 flex flex-col\">\n          <ChatWindow \n            isMobile={isMobile} \n            onBackClick={() => setSidebarOpen(true)} \n          />\n        </main>\n      </div>\n      \n      {selectedMedia && (\n        <MediaViewer \n          media={selectedMedia} \n          onClose={() => setSelectedMedia(null)} \n          allMedia={media}\n        />\n      )}\n    </div>\n  );\n}\n\nfunction App() {\n  return (\n    <ChatProvider>\n      <AppContent />\n    </ChatProvider>\n  );\n}\n\nexport default App;